---
# required metadata

title: Руководство для разработчиков по пакету SDK для приложений Microsoft Intune для Android | Microsoft Intune
description:
keywords:
author: Msmbaldwin
manager: jeffgilb
ms.date: 04/28/2016
ms.topic: article
ms.prod:
ms.service: microsoft-intune
ms.technology:
ms.assetid: 0100e1b5-5edd-4541-95f1-aec301fb96af

# optional metadata

#ROBOTS:
#audience:
#ms.devlang:
ms.reviewer: jeffgilb
ms.suite: ems
#ms.tgt_pltfrm:
#ms.custom:

---

# Руководство по пакету SDK для приложений Intune для разработчиков под Android

> [!NOTE]При желании прочтите статью [Обзор пакета SDK для приложений Intune](intune-app-sdk.md), в которой рассмотрены актуальные функции пакета SDK и описана подготовка к интеграции на каждой поддерживаемой платформе. 

# Состав пакета SDK 

Пакет SDK для приложений Intune для Android представляет собой стандартную библиотеку Android без внешних зависимостей. 
Пакет SDK состоит из следующих компонентов:  

* **`Microsoft.Intune MAM.SDK.jar`**: интерфейсы, необходимые для включения MAM в приложении, а также для обеспечения взаимодействия с приложением корпоративного портала Microsoft Intune. Приложения должны указывать его как ссылку на библиотеку Android.

*  **`Microsoft.Intune.MAM.SDK.Support.v4.jar`**: интерфейсы, необходимые для включения MAM в приложениях, использующих библиотеку поддержки Android версии 4.  Приложения, которым требуется такая поддержка, должны ссылаться непосредственно на JAR-файл. 

* **`Microsoft.Intune.MAM.SDK.Support.v7.jar`**: интерфейсы, необходимые для включения MAM в приложениях, использующих библиотеку поддержки Android версии 7.   Приложения, которым требуется такая поддержка, должны ссылаться непосредственно на JAR-файл.

* **Каталог ресурсов**: ресурсы (например строки), на которых основан пакет SDK. 

* **`Microsoft.Intune.MAM.SDK.aar`**: компоненты пакета SDK, за исключением JAR-файлов Support.V4 и Support.V7. Этот файл можно использовать вместо отдельных компонентов, если система сборки поддерживает AAR-файлы.

* **`AndroidManifest.xml`**: дополнительные точки входа и требования к библиотекам. 

* **`THIRDPARTYNOTICES.TXT`**: примечание об атрибуции, где указан сторонний код и/или код OSS, который будет скомпилирован в ваше приложение. 

# Требования 

Пакет SDK для приложений Intune представляет собой скомпилированный проект Android. Поэтому он сильно зависит от версии Android, используемой приложением для минимальных или целевых версий API. Пакет SDK поддерживает Android API с 14 (Android 4.0 +) до 24. 

# Принцип работы пакета SDK для приложений Intune 

Для включения политик управления приложениями пакету SDK для приложений Intune требуется внести изменения в исходный код приложения. Это осуществляется путем замены базовых классов Android на эквивалентные управляемые классы, на которые ссылается документ с префиксом `MAM`. Классы пакета SDK располагаются между базовым классом Android и производной версией этого класса в самом приложении.  Используя действие в качестве примера, вы получаете иерархию наследования, которая выглядит следующим образом: `Activity ->MAMActivity->AppSpecificActivity`.

Когда `AppSpecificActivity` требуется взаимодействовать со своим родительским элементом, например `super.onCreate())`, `MAMActivity` является суперклассом, хотя он и находится в иерархии наследования и заменяет несколько методов. Приложения Android имеют одиночный режим и получают доступ ко всей системе через свой объект Context.  С другой стороны, приложения с внедренным пакетом SDK для приложений Intune имеют двойной режим, так как приложения по-прежнему получают доступ к системе через объект Context, однако в зависимости от используемого базового действия объект Context будет либо предоставляться системой Android, либо интеллектуально мультиплексироваться между ограниченным представлением системы и предоставленным системой Android объектом Context.

Для включения политики MAM пакету SDK для приложений Intune для Android требуется, чтобы на устройстве присутствовало приложение корпоративного портала. При отсутствии приложения корпоративного портала поведение приложения с поддержкой MAM не изменится, и оно будет работать точно так же, как и любое другое мобильное приложение. Если корпоративный портал установлен и имеет политику для пользователя, точки входа SDK инициализируются асинхронно. Инициализация необходима только при первоначальном создании процесса системой Android. Во время инициализации устанавливается подключение к приложению корпоративного портала и скачивается политика ограничений на установку приложений.  

# Интеграция с пакетом SDK для приложений Intune
 
Как уже было указано ранее, для включения политик управления приложениями пакету SDK требуется внести изменения в исходный код приложения. Ниже приведены шаги, необходимые для включения MAM в приложении: 

## Замена классов, методов и действий на их эквивалент MAM (обязательно) 

* Базовые классы Android необходимо заменить эквивалентом MAM. Для этого найдите все экземпляры классов, перечисленных в следующей таблице, и замените их эквивалентом пакета SDK для приложений Intune.  

    | Класс Android | Замена пакета SDK для приложений Intune |
    |--|--|
    | android.app.Activity | MAMActivity |
    | android.app.ActivityGroup | MAMActivityGroup |
    | android.app.AliasActivity | MAMAliasActivity |
    | android.app.Application | MAMApplication |
    | android.app.DialogFragment | MAMDialogFragment |
    | android.app.ExpandableListActivity | MAMExpandableListActivity |
    | android.app.Fragment | MAMFragment |
    | android.app.IntentService | MAMIntentService |
    | android.app.LauncherActivity | MAMLauncherActivity |
    | android.app.ListActivity | MAMListActivity |
    | android.app.NativeActivity | MAMNativeActivity |
    | android.app.PendingIntent | MAMPendingIntent |
    | android.app.Service | MAMService |
    | android.app.TabActivity | MAMTabActivity |
    | android.app.TaskStackBuilder | MAMTaskStackBuilder |
    | android.app.backup.BackupAgent | MAMBackupAgent |
    | android.app.backup.BackupAgentHelper | MAMBackupAgentHelper |
    | android.app.backup.FileBackupHelper | MAMFileBackupHelper |
    | android.app.backup.SharePreferencesBackupHelper | MAMSharedPreferencesBackupHelper |
    | android.content.BroadcastReceiver | MAMBroadcastReceiver |
    | android.content.ContentProvider | MAMContentProvider |
    | android.os.Binder | MAMBinder* |
    | android.provider.DocumentsProvider | MAMDocumentsProvider |
    | android.preference.PreferenceActivity | MAMPreferenceActivity |

    *Заменять Binder на MAMBinder требуется только в том случае, если Binder не создается интерфейсом AIDL.

    **Microsoft.Intune.MAM.SDK.Suppилиt.v4.jar**:

    | Класс Android | Замена пакета SDK для MAM Intune |
    |--|--|
    | android.support.v4.app.DialogFragment | MAMDialogFragment
    | android.support.v4.app.FragmentActivity | MAMFragmentActivity
    | android.support.v4.app.Fragment | MAMFragment
    | android.support.v4.app.TaskStackBuilder | MAMTaskStackBuilder
    | android.support.v4.content.FileProvider | MAMFileProvider
    
    **Microsoft.Intune.MAM.SDK.Suppилиt.v7.jar**:

    |Класс Android | Замена пакета SDK для MAM Intune |
    |--|--|
    |android.support.v7.app.ActionBarActivity | MAMActionBarActivity |


* При использовании точки входа Android, которая была переопределена ее эквивалентом MAM, необходимо использовать альтернативную версию жизненного цикла точки входа (за исключением класса `MAMApplication`).

    Например, при наследовании от `MAMActivity`вместо переопределения `onCreate` и вызова `super.onCreate`действию необходимо переопределить `onMAMCreate` и вызвать`uper.onMAMCreate`. Это позволяет ограничивать запуск действия (среди прочих) в определенных случаях. 

# Включение функций, требующих содействия со стороны приложения 

Существуют некоторые политики, которые пакет SDK не может реализовать самостоятельно. Чтобы позволить приложению управлять своим поведением для этих функций, мы предоставляем несколько интерфейсов API, которые находятся в указанном ниже интерфейсе `AppPolicy` .  

    /**
     * External facing app policies.
     */
    public interface AppPolicy {
        /**
         * Restrict where an app can save personal data.
         * 
         * @return True if the app is allowed to save to personal data stores;
         *         false otherwise.
         */
        boolean getIsSaveToPersonalAllowed();
    
        /**
         * Check if policy prohibits saving to a content provider location.
         * 
         * @param location
         *            a content URI to check
         * @return True if location is not a content URI or if policy does not 
         *         prohibit saving to the content location.
         */
        boolean getIsSaveToLocationAllowed(android.net.Uri location); 
    
        /**
         * Whether the SDK PIN prompt is enlightened for the app.
         * 
         * @return True if the PIN is enabled. False otherwise.
         */
        boolean getIsPinRequired();
        /**
         * Whether the Intune Managed Browser is required to open web links.
         *
         * @return True if the Managed Browser is required, false otherwise
         */
        boolean getIsManagedBrowserRequired();
    }

## Предоставление ИТ-администратору возможности управления поведением сохранения приложений

Во многих приложениях реализованы функции, позволяющие конечным пользователям сохранять файлы локально или в другой службе. Пакет SDK для приложений Intune позволяет ИТ-администраторам защититься от утечки данных за счет применения ограничений политик, уместных для их организации.  Одной из политик, которой может управлять администратор, является возможность конечного пользователя сохранять данные в личном хранилище. Сюда входит сохранение в локальной папке, на SD-карте или в службах резервного копирования. Для включения этой функции требуется содействие со стороны приложения. Если приложение позволяет сохранять данные в личное или облачное расположение непосредственно из приложения, необходимо реализовать эту функцию, чтобы предоставить ИТ-администратору возможность разрешать и запрещать сохранение в расположение. Указанные ниже API позволяют приложению узнать, разрешено ли в текущей политике администрирования сохранение в личном хранилище. После этого приложение может применить политику, так как ему известно о том, что хранилище личных данных доступно конечному пользователю через это приложение.  

Чтобы определить, применяется ли политика, приложение может сделать следующий вызов: 

    MAMComponents.get(AppPolicy.class).getIsSaveToPersonalAllowed();

**Примечание**. MAMComponents.get(AppPolicy.class) всегда будет возвращать политику приложений, отличную от NULL, даже если устройство или приложение не являются управляемыми. 

## Разрешение определения потребности в политике ПИН-кода для приложения
 
 Существуют дополнительные политики, в которых приложению может потребоваться отключить некоторые функции, чтобы избежать дублирования функциональности пакета SDK для приложений Intune. Например, если приложение имеет собственный пользовательский интерфейс для использования ПИН-кодов, возможно, его потребуется отключить, если пакет SDK настроен на запрос ПИН-кода у конечного пользователя. 

Чтобы определить, настроена ли политика ПИН-кода на периодический запрос ПИН-кода, приложение может сделать следующий вызов: 

    MAMComponents.get(AppPolicy.class).getIsPinRequired();

## Регистрация для получения уведомлений из пакета SDK  

Пакет SDK для приложений Intune позволяет приложению управлять поведением, когда некоторые политики, такие как политики удаленной очистки, используются ИТ-администратором. Чтобы сделать это, необходимо зарегистрироваться для получения уведомлений из пакета SDK, создав класс `MAMNotificationReceiver` и зарегистрировав его с помощью `MAMNotificationReceiverRegistry`. Для этого укажите получателя, а также тип уведомлений для него в  `App.onCreate`, как показано в следующем примере:
 
    @Override
      public void onCreate() {
            super.onCreate();
    MAMComponents.get(MAMNotificationReceiverRegistry.class).registerReceiver(
    new ToastNotificationReceiver(), MAMNotificationType.WIPE_USER_DATA);
    }

`MAMNotificationReceiver` просто получает уведомления. Некоторые уведомления обрабатываются непосредственно пакетом SDK, другие требуют участия со стороны приложения. Приложение должно возвратить для уведомления значение true или false. Оно должно всегда возвращать значение true, за исключением случаев, когда какое-либо действие, которое приложение пыталось выполнить в результате уведомления, завершилось со сбоем. Этот сбой может быть передан в службу Intune, например, если приложение сообщает, что ему не удалось очистить пользовательские данные. Можно безопасно осуществить блокировку в `MAMNotificationReceiver.onReceive`, так как его обратный вызов не выполняется в потоке пользовательского интерфейса. 

Ниже интерфейс MAMNotificationReceiver приведен в том виде, как он определен в пакете SDK: 

    /**
     * The SDK is signaling that a MAM event has occurred. 
     * 
     */
    public interface MAMNotificationReceiver {
      /**
      * A notification was received.
      * 
      * @param notification
      *            The notification that was received.
    * @return The receiver should return true if it handled the
    *   notification without error (or if it decided to ignore the
    *   notification). If the receiver tried to take some action in 
    *   response to the notification but failed to complete that
      *   action it should return false.
      */
      boolean onReceive(MAMNotification notification);
    }

Следующие уведомления отправляются в приложение, и некоторые из них могут потребовать содействия со стороны приложения: 

* **`WIPE_USER_DATA`Уведомление**: это уведомление отправляется в классе `MAMUserNotification`. При получении этого уведомления приложение должно удалить все данные, связанные с удостоверением, переданным с `MAMUserNotification`. В настоящее время это уведомление отправляется во время отмены регистрации службы Intune. Первичное имя пользователя обычно указывается во время регистрации. В случае регистрации для этого уведомления приложению необходимо убедиться, что были удалены все пользовательские данные. Если регистрация для него не выполняется, применяется поведение выборочной очистки по умолчанию. 

* **`WIPE_USER_AUXILIARY_DATA`Уведомление**: приложения могут регистрироваться для этого уведомления, если им необходимо, чтобы пакет SDK для приложений Intune выполнил очистку по умолчанию, но при этом требуется удалить некоторые дополнительные данные.  

* **`REFRESH_POLICY`Уведомление**: это уведомление отправляется в MAMNotification без какой-либо дополнительной информации. При получении этого уведомления любая кэшированная политика не должна больше рассматриваться как недействительная, в связи с чем требуется проверить назначение этой политики. Обычно это осуществляется пакетом SDK, однако это может сделать и приложение, если политика имеет сохраняемый характер. 

## Ожидающие намерения и методы 

После наследования от одной из точек входа MAM вы можете применять объект Context обычным образом для запуска действий, использования `PackageManager`и т. п.  `PendingIntents` являются исключением из этого правила. При вызове таких классов необходимо изменить имя класса. Например, вместо `PendingIntent.get*`, `MAMPendingIntents.get*` . 

Иногда метод, доступный в классе Android, может быть помечен как окончательный в замещающем классе MAM. В этом случае замещающий класс MAM предоставляет метод с таким же именем (обычно добавляется суффикс "MAM"), который должен быть переопределен вместо исходного. Например, вместо переопределения `ContentProvider.query`нужно переопределить `MAMContentProvider.queryMAM`. Компилятор Java должен налагать окончательные ограничения во избежание случайного переопределения исходного метода вместо его эквивалента MAM. 

# Защита данных резервной копии 

Начиная с Android Marshmallow (API 23), система Android предоставляет два способа резервного копирования данных приложением. Эти параметры доступны для использования в приложении и требуют выполнения различных действий для обеспечения правильной защиты данных MAM. В следующей таблице приведен краткий обзор соответствующих действий, необходимых для правильной защиты данных.  Дополнительные сведения о резервном копировании в Android также можно найти в [руководстве по резервному копированию данных для разработчика под Android](http://developer.android.com/guide/topics/data/backup.html.). 

## Автоматическое полное резервное копирование

Начиная с Android M, система Android начала предлагать приложениям автоматическое полное резервное копирование приложений при выполнении на устройстве Android M, не учитывая целевой API. При условии, что значение атрибута `android:allowBackup` отлично от false, приложение получит полные нефильтрованные резервные копии приложения. Это создает риск утечки данных, поэтому пакет SDK требует внесения изменений, описанных в следующей таблице, чтобы обеспечить защиту данных.  Важно в точности следовать приведенным ниже указаниям для реализации надлежащей защиты данных клиента.  Если задать `android:allowBackup=false` , ваше приложение никогда не помещается операционной системой в очередь для резервных копий, и никаких дальнейших действий для MAM не существует, поскольку резервное копирование не выполняется.
 
 ## Резервные копии "ключ — значение"

Эта возможность доступна для всех API и использует `BackupAgent` и `BackupAgentHelper`. 

### Использование BackupAgentHelper

`BackupAgentHelper` гораздо проще, чем `BackupAgent`, как с точки зрения собственных функций Android, так и с точки зрения интеграции MAM. `BackupAgentHelper` позволяет разработчику регистрировать целые файлы и общие настройки в `FileBackupHelper` или `SharedPreferencesBackupHelper` соответственно, которые затем добавляются в `BackupAgentHelper` при его создании. 

### Использование BackupAgent

`BackupAgent` позволяет более явно задать, какие именно данные следует копировать. Однако этот вариант не позволяет воспользоваться преимуществами платформы резервного копирования Android.  Поскольку вы отвечаете за реализацию, существуют дополнительные шаги, необходимые для обеспечения защиты данных из MAM. Поскольку большая часть работы возложена на вас как разработчика, интеграция MAM играет более важную роль. 

#### У приложения нет агента резервного копирования
  
Это варианты, доступные разработчику при `Android:allowbBackup =true`:

##### Полное резервное копирование в соответствии с файлом конфигурации: 

Укажите ресурс в теге метаданных `com.microsoft.intune.mam.FullBackupContent` в манифесте. Например:
    `<meta-data android:name="com.microsoft.intune.mam.FullBackupContent" android:resource="@xml/my_scheme" />`

Добавьте следующий атрибут в тег `<application>` : `android:fullBackupContent="@xml/my_scheme"`, где `my_scheme` является XML-ресурсом в приложении. 

##### Полное резервное копирование без исключений 

Укажите тег в манифесте, например: `<meta-data android:name="com.microsoft.intune.mam.FullBackupContent" android:value="true" />` 
 
Добавьте атрибут `android:fullBackupContent="true"` в тег `<application>`.

#### У приложения есть агент резервного копирования

Следуйте рекомендациям из разделов по `BackupAgent` и `BackupAgentHelper` выше. 

Рассмотрите возможность использования нашего `MAMDefaultFullBackupAgent`, который обеспечивает простое и удобное резервное копирование в Android M. 

### Подготовка к резервному копированию

Перед началом резервного копирования необходимо проверить, что буферы файлов или данных, которые вы планируете для резервного копирования, действительно могут копироваться. Чтобы определить это, мы предоставляем функцию `isBackupAllowed` в `MAMFileProtectionManager` и `MAMDataProtectionManager` . Если буфер данных или файлов не разрешен для резервного копирования, вам не следует использовать его в рамках резервного копирования.

Если в определенный момент во время архивации вам потребуется выполнить архивацию удостоверений для файлов, проверенных на шаге 1, необходимо вызвать `backupMAMFileIdentity(BackupDataOutput data, File … files)` с файлами, из которых вы планируете извлекать данные. При этом автоматически создаются новые сущности резервного копирования, которые записываются в `BackupDataOutput` . Эти сущности будут автоматически использоваться при восстановлении. 

## Настройка параметров библиотеки проверки подлинности Azure Directory (ADAL)  

Пакет SDK использует из библиотеки ADAL сценарии проверки подлинности и условного запуска сценариев, что требует включения в приложения определенной конфигурации Azure Active Directory. Значения конфигурации передаются в пакет SDK через метаданные `AndroidManifest` . Чтобы настроить приложение и реализовать надлежащую проверку подлинности, добавьте следующий код в узел приложения в `AndroidManifest`. Некоторые из этих конфигураций нужны только тогда, когда приложение использует библиотеку ADAL для общей проверки подлинности; в этом случае вам потребуются эти конкретные значения, используемые вашим приложением для регистрации в AAD. Это позволяет предотвратить ситуацию, когда пользователь получает два запроса проверки подлинности, так как AAD распознает два отдельных значения регистрации: одно из приложения и одно из пакета SDK. 

        <meta-data
            android:name="com.microsoft.intune.mam.aad.Authority"
            android:value="https://AAD authority/" />
        <meta-data
            android:name="com.microsoft.intune.mam.aad.ClientID"
            android:value="your-client-ID-GUID" />
        <meta-data
            android:name="com.microsoft.intune.mam.aad.NonBrokerRedirectURI"
            android:value="your-redirect-URI" />
        <meta-data
            android:name="com.microsoft.intune.mam.aad.SkipBroker"
            android:value="[true | false]" />

Идентификаторы GUID не должны иметь начальные или конечные фигурные скобки.

### Распространенные конфигурации ADAL 

Ниже приведена распространенная конфигурация для описанных выше значений. 

#### Приложение не интегрируется с ADAL

* Полномочия должны быть присвоены требуемой среде, где были настроены учетные записи AAD.

* SkipBroker необходимо присвоить значение true.

#### Приложение интегрируется с ADAL

* Полномочия должны быть присвоены требуемой среде, где были настроены учетные записи AAD.

* Client ID необходимо присвоить идентификатор клиента.

* `NonBrokerRedirectURI` необходимо присвоить допустимый URI перенаправления для приложения.
    * Or `urn:ietf:wg:oauth:2.0:oob` как допустимый URI перенаправления AAD.

* SkipBroker необходимо присвоить значение false (либо значение должно отсутствовать).

* AAD необходимо настроить на прием URI перенаправления брокера.

#### Приложение интегрируется с ADAL, но не поддерживает приложение проверки подлинности AAD Authenticator.

* Полномочия должны быть присвоены требуемой среде, где были настроены учетные записи AAD.

* Client ID необходимо присвоить идентификатор клиента.

* `NonBrokerRedirectURI` необходимо присвоить допустимый URI перенаправления для приложения.

    * Or `urn:ietf:wg:oauth:2.0:oob` как допустимый URI перенаправления AAD.

## Включение ведения журнала в пакете SDK 

Ведение журнала осуществляется посредством платформы `java.util.logging` . Чтобы получать журналы, настройте глобальное ведение журналов, как описано в [техническом руководстве по Java](http://docs.oracle.com/javase/6/docs/technotes/guides/logging/overview.html). В зависимости от конкретного приложения оптимальным местом для инициации ведения журналов обычно является `App.onCreate` . Обратите внимание на то, что сообщения журнала идентифицируются по имени класса, что может создавать некоторую путаницу.

# Известные ограничения платформы 

## Ограничения размера файла 

В Android ограничения формата исполняемого файла Dalvik могут вызывать проблемы для больших баз кода, работающих без ProGuard. В частности, могут возникнуть следующие ограничения: 

* Предел в 65 тысяч для полей.

* Предел в 65 тысяч для методов.

При наличии множества проектов каждый android:package получает копию R, что значительно увеличивает число полей при добавлении библиотек. Следующие рекомендации могут помочь устранить это ограничение:
 
* Все проекты библиотеки должны по мере возможности совместно использовать один и тот же android:package. Это приведен к эпизодическим сбоям в рабочей среде, так как данная проблема возникает исключительно во время сборки.   Кроме того, более новые версии пакета SDK для Android будут предварительно обрабатывать файлы DEX, чтобы удалить некоторую избыточность. Это еще больше сокращает расстояние до полей.

* Используйте самые новые из доступных средств сборки пакета SDK для Android.

* Удалите все ненужные и неиспользуемые библиотеки (например, `android.support.v4`).

## Ограничения применения политики

**Снимок экрана**: пакет SDK не может применить новое значение параметра для снимка экрана в действиях, которые уже прошли через Activity.onCreate. Это может привести к тому, что в течение определенного времени, когда приложение настроено на отключение снимков экрана, снимки экрана по-прежнему могут создаваться.

**Использование сопоставителей содержимого*: политика передачи или получения может полностью или частично блокировать использование сопоставителя содержимого для доступа к поставщику содержимого в другом приложении. Это приводит к тому, что методы ContentResolver возвращают значение NULL или выдают значение сбоя (например, при блокировке `openOutputStream` выдает исключение `FileNotFoundException` ). Приложение может определить, вызван ли (и может ли быть вызван) сбой записи данных через сопоставитель политики, выполнив вызов:

    MAMComponents.get(AppPolicy.class).getIsSaveToLocationAllowed(contentURI)

**Экспортированные службы**: файл `AndroidManifest.xml` , входящий в состав пакета SDK для приложений Intune, содержит `MAMNotificationReceiverService`, который должен быть экспортированной службой, чтобы разрешить корпоративному порталу отправлять уведомления в приложение с расширенными возможностями. Служба проверяет вызывающий объект, чтобы убедиться, что корпоративный портал может отправлять уведомления. 

# Рекомендации и советы для Android 

Пакет SDK Intune поддерживает контракт, предоставляемый API Android, хотя состояния сбоя могут возникать чаще в результате применения политики. Эти рекомендации для Android позволяют снизить вероятность сбоя: 

* Функции пакета SDK для Android, которые могут возвращать значение NULL, теперь с большей вероятностью равны NULL.  Чтобы свести число возникающих проблем к минимуму, обеспечьте наличие проверок значений NULL в нужных местах.

* Функции, которые могут быть проверены, следует проверять посредством их интерфейсов API из пакета SDK.

* Любые производные функции следует вызвать через их версии суперкласса.

* Избегайте неоднозначного использования любых API. Например, `Activity.startActivityForResult/onActivityResult` без проверки requestCode вызывает нестандартное поведение.


<!--HONumber=May16_HO2-->


