---
# required metadata

title: Подготовка приложений iOS для управления мобильными приложениями с помощью инструмента упаковки для приложений | Microsoft Intune
description:
keywords:
author: Staciebarker
manager: jeffgilb
ms.date: 04/28/2016
ms.topic: article
ms.prod:
ms.service: microsoft-intune
ms.technology:
ms.assetid: 99ab0369-5115-4dc8-83ea-db7239b0de97

# optional metadata

#ROBOTS:
#audience:
#ms.devlang:
ms.reviewer: jeffgilb
ms.suite: ems
#ms.tgt_pltfrm:
#ms.custom:

---

# Подготовка приложений iOS для управления мобильными приложениями с помощью инструмента упаковки для приложений Intune
**Инструмент упаковки приложений Microsoft Intune для iOS** используется для изменения поведения внутрикорпоративных приложений iOS за счет ограничения возможностей приложения без изменения кода самого приложения.

Инструмент является приложением командной строки Mac OS, которое создает "оболочку" вокруг приложения. После обработки приложения его функциональность можно изменить с помощью настраиваемых [политик управления мобильными приложениями](configure-and-deploy-mobile-application-management-policies-in-the-microsoft-intune-console.md).

Чтобы скачать это средство, см. статью [Инструмент упаковки приложений Microsoft Intune для iOS](http://www.microsoft.com/en-us/download/details.aspx?id=45218).

## Шаг 1. Выполнение необходимых условий для использования инструмента упаковки приложений

|Требование|Дополнительные сведения|
|---------------|--------------------------------|
|Поддерживаемая операционная система и набор средств|Средство изоляции приложений необходимо запускать на компьютере под управлением Mac OS X 10.8.5 или более поздней версии с установленным набором инструментов XCode версии 5 или более поздней.|
|Сертификат для подписи и подготовительный профиль|Требуется наличие сертификата для подписи и подготовительного профиля Apple. См. [документацию для разработчиков Apple](https://developer.apple.com/).|
|Обработка приложения с помощью средства упаковки приложений|Приложения должны быть разработаны и подписаны специалистами вашей компании или независимым поставщиком программного обеспечения (ISV). Это средство нельзя использовать для обработки приложений из магазина Apple Store. Приложение должно быть написано для iOS 7.0 или более поздней версии. Приложения должны иметь формат PIE (Position Independent Executable). Дополнительные сведения о формате PIE см. в документации для разработчиков Apple. И, наконец, приложение должно иметь расширение **APP**или **IPA**.|
|Приложения, которые инструмент упаковки приложений не может обработать|Зашифрованные приложения, неподписанные приложения и приложения с расширенными атрибутами файлов.|
|Приложения, использующие библиотеку Azure Active Directory (ADAL)|Если приложение использует ADAL, оно должно использовать ADAL версии 1.0.2 или более поздней, разработчик должен предоставить своему приложению доступ к ресурсу управления мобильными приложениями Intune.<br /><br />В разделе [Сведения для приложений, использующих библиотеку Azure Active Directory (ADAL)](prepare-ios-apps-for-mobile-application-management-with-the-microsoft-intune-app-wrapping-tool.md#information-for-apps-that-use-the-azure-active-directory-library) этой статьи приведены сведения о том, как использовать ADAL.|
|Настройка прав для приложения|Перед упаковкой приложения вам необходимо задать права, предоставляющие приложению дополнительные разрешения и возможности, отсутствующие в приложении по умолчанию. Инструкции см. в статье [Установка прав приложения](#setting-app-entitlements).|

## Шаг 2. Установка инструмента упаковки приложений

1.  На странице **Microsoft Intune App Wrapping Tool for iOS** [Центра загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=45218) скачайте файл установки инструмента упаковки приложений на компьютер Mac.

2.  На компьютере Mac дважды щелкните файл установки **Microsoft Intune App Wrapping Tool for iOS.dmg**.

3.  Щелкните **Принимаю**, чтобы принять лицензионное соглашение (EULA). Установщик подключается и отображается на компьютере Mac.

4.  Откройте установщик и скопируйте отображаемые файлы в новую папку на компьютере Mac. Теперь можно отключить подключенный диск установщика.

    Теперь все готово для запуска средства изоляции приложений.

## Шаг 3. Запуск инструмента упаковки приложений

1.  На компьютере Mac откройте окно терминала и перейдите к папке с сохраненными файлами. Поскольку исполняемый файл находится внутри пакета, выполните команду следующим образом:
```
    ./IntuneMAMPackager.app/Contents/MacOS/IntuneMAMPackager –i /<path of input app>/<app filename> -o /<path to output folder>/<app filename> –p /<path to provisioning profile> –c <SHA1 hash of the certificate> -a <client ID of input app> -r <reply URI of input app> -v true
```
    > [!NOTE]
    > Some parameters are optional as shown in the table below.

    **Example:** The following example command runs the app wrapping tool on an app named **MyApp.ipa**. A provisioning profile and SHA-1 hash are specified. The processed app is created and stored in the **/users/myadmin/Documents** on the Mac computer.

    ```
    /users/myadmin/Downloads/IntuneMAMPackager.app/Contents/MacOS/IntuneMAMPackager -i /users/myadmin/Downloads/MyApp.ipa -o /users/myadmin/Documents/MyApp_Wrapped.ipa -p /users/myadmin/Downloads/My_Provisioning_Profile_.mobileprovision -c 12A3BC45D67EF8901A2B3CDEF4ABC5D6E7890FAB –a 20e1cd0d-268e-4308-9583-02ae97dd353e –r https://contoso/ -v true
    ```
    You can use the following command line properties with the app wrapping tool:

|Свойство|Дополнительные сведения|
  |------------|--------------------|
  |**-h**|Отображает доступные свойства командной строки для средства изоляции приложений.|
  |**-i**|Указывает путь и имя файла входного приложения.|
  |**-o**|Указывает путь для сохранения обработанного приложения.|
  |**-p**|Указывает путь к подготовительному профилю для приложений iOS.|
  |**-c**|Указывает хэш SHA1 сертификата для подписи.|
  |**-a**|Идентификатор клиента входного приложения (в формате GUID), если приложение использует библиотеки Azure Active Directory (необязательно).|
  |**-r**|URI перенаправления входного приложения, если приложение использует библиотеки Azure Active Directory (необязательно).|
  |**-v**|Вывод подробных сообщений на консоль (необязательно).|

2. После завершения обработки отображается сообщения **Приложение успешно изолировано** .

    При возникновении ошибки см. справочные сведения в разделе [Сообщения об ошибках](prepare-ios-apps-for-mobile-application-management-with-the-microsoft-intune-app-wrapping-tool.md#error-messages).

3.  Изолированное приложение сохраняется в указанной ранее целевой папке. Теперь приложение можно отправить в [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] и связать его с политикой управления мобильными приложениями.

    > [!IMPORTANT]
    > Приложение необходимо отправить в виде нового приложения. Обновить старую, неизолированную версию приложения нельзя.

    Теперь вы можете развернуть приложение в группах [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)], и оно будет работать на устройстве с заданными ограничениями.

## Сообщения об ошибках и файлы журналов
Используйте следующие сведения для устранения неполадок со средством упаковки приложений.

### Сообщения об ошибках
Если средство изоляции приложений не удается успешно завершить, отображается одно из следующих сообщений об ошибке.

|Сообщение об ошибке|Дополнительные сведения|
|-----------------|--------------------|
|Необходимо указать действительный подготовительный профиль iOS.|Возможно, ваш подготовительный профиль недействителен. Убедитесь, что у вас есть необходимые разрешения для устройств и профиль корректно настроен либо для разработки, либо для распространения. Также возможно, что срок действия подготовительного профиля истек.|
|Укажите допустимое имя входного приложения.|Убедитесь, что имя входного приложения указано правильно.|
|Укажите допустимый путь к выходному приложению.|Убедитесь, что путь к выходному приложению существует и указан правильно.|
|Укажите допустимый входной подготовительный профиль.|Убедитесь, что указано допустимое имя и расширение подготовительного профиля. В подготовительном профиле могут отсутствовать права или может быть не включен параметр командной строки **–p**.|
|Указанное входное приложение не найдено. Укажите допустимое имя входного приложения и путь к нему.|Убедитесь, что путь к входному приложению является допустимым и существует. Убедитесь, что входное приложение существует в этом расположении.|
|Указанный файл входного подготовительного профиля не найден. Укажите допустимый файл входного подготовительного профиля.|Убедитесь, что путь к файлу входного подготовительного профиля является допустимым и что указанный файл существует.|
|Указанная выходная папка приложения не найдена. Укажите допустимый путь к выходному приложению.|Убедитесь, что указанный выходной путь является допустимым и существует.|
|Расширение выходного приложения отлично от IPA.|Средство изоляции приложений поддерживает только приложения с расширениями **APP** и **IPA** . Убедитесь, что выходной файл имеет допустимое расширение.|
|Указан недопустимый сертификат для подписи. Укажите допустимый сертификат для подписи Apple.|Убедитесь, что с портала разработчиков Apple загружен правильный сертификат для подписи. Возможно, истек срок действия сертификата. Если сертификат и подготовительный профиль Apple можно использовать для корректной подписи приложения в Xcode, они являются допустимыми для средства изоляции приложений.|
|Указанное входное приложение является недопустимым. Укажите допустимое приложение.|Убедитесь, что имеется допустимое приложение iOS, скомпилированное в виде файла APP или IPA.|
|Указанное входное приложение зашифровано. Укажите допустимое незашифрованное приложение.|Средство изоляции приложений не поддерживает зашифрованные приложения. Укажите незашифрованное приложение.|
|Указанное входное приложение не является приложением в формате PIE. Укажите допустимое приложение в формате PIE.|При запуске приложений PIE адреса их загрузки в памяти определяются случайным образом, что является преимуществом с точки зрения обеспечения безопасности. Дополнительные сведения см. в документации для разработчиков Apple.|
|Указанное входное приложение уже изолировано. Укажите допустимое неизолированное приложение.|Не удается обработать приложение, которое уже было обработано средством. Если необходимо повторно обработать приложение, запустите средство, используя исходную версию приложения.|
|Указанное входное приложение не подписано. Укажите допустимое подписанное приложение.|Для средства изоляции приложения требуется подписанное приложение. Сведения о подписи изолированного приложения см. в документации для разработчиков.|
|Указанное входное приложение должно иметь формат IPA или APP.|Средство изоляции приложений поддерживает только расширения APP и IPA. Убедитесь, что входной файл имеет допустимое расширение и скомпилирован как файл APP или IPA.|
|Указанное входное приложение уже было изолировано и имеет самую последнюю версию шаблона политики.|Средство изоляции приложений не выполняет повторную изоляцию существующего изолированного приложения с последней версией шаблона политики.|
|Данный идентификатор клиента Azure Active Directory имеет недопустимый формат GUID. Укажите допустимый идентификатор клиента.|При использовании параметра "Идентификатор клиента" убедитесь, что указан допустимый идентификатор клиента в формате GUID.|
|Данный URI ответа Azure Active Directory имеет недопустимый формат. Укажите допустимый URI ответа.|При использовании свойства командной строки URI ответа убедитесь, что указан допустимый URI ответа.|
|ПРЕДУПРЕЖДЕНИЕ. Хэш SHA1 сертификата не указан. Убедитесь, что изолированное приложение подписано перед развертыванием.|Убедитесь, что указан допустимый хэш SHA (с помощью свойства командной строки **-c** ).|

### Файлы журнала для средства изоляции приложений
Приложения, которые были изолированы с помощью средства изоляции приложений, формируют журналы, записываемые в консоль устройства клиента iOS. Эта информация полезна в случаях, когда возникают проблемы с приложением и нужно определить, не связана ли неполадка со средством изоляции приложений. Чтобы получить эти данные, необходимо выполнить следующие действия.

1.  Воспроизвести проблему путем запуска приложения.

2.  Собрать выходные данные консоли, следуя инструкциям Apple по [отладке развернутых приложений iOS](https://developer.apple.com/library/ios/qa/qa1747/_index.html).

3.  Отфильтровать сохраненные журналы для вывода ограничений по приложениям, задав в консоли следующий сценарий:

    ```
    grep “IntuneAppRestrictions” <text file containing console output> > <required filtered log file name>
    ```
    Отфильтрованные журналы можно отправить в корпорацию Майкрософт.

    > В файле журнала элемент "версия сборки" представляет версию сборки Xcode.

    Изолированные приложения в случае сбоя дают возможность отправлять журналы по электронной почте непосредственно с устройства. Пользователи могут отправлять журналы вам для анализа и (при необходимости) последующей пересылки в корпорацию Майкрософт.

## Сведения для приложений, использующих библиотеку Azure Active Directory
Информация в этом разделе относится только к приложениям, использующим библиотеку Azure Active Directory (ADAL). Если вы не уверены, что приложение использует эту библиотеку, обратитесь к разработчику приложения.

Приложение должно использовать ADAL версии 1.0.2 или более поздней.

Для приложений, использующих ADAL, должны выполняться следующие условия.

-   Приложение должно использовать ADAL версии 1.0.2 или более поздней.

-   Разработчик должен предоставить своему приложению доступ к ресурсу управления мобильными приложениями Intune, как описано в разделе [Шаги для приложений, использующих ADAL](#steps-to-follow-for-apps-that-use-adal).

### Обзор идентификаторов, которые необходимо получить
Приложения, использующие ADAL, необходимо зарегистрировать на портале управления Azure для получения двух уникальных идентификаторов.

|Идентификатор|Дополнительные сведения|Значение по умолчанию|
|--------------|--------------------|-----------------|
|**Идентификатор клиента**|После регистрации приложения в Azure Active Directory для него создается уникальный идентификатор GUID.<br /><br />Если известен конкретный идентификатор клиента приложения, можно указать это значение. В противном случае следует использовать значение по умолчанию.|6c7e8096-f593-4d72-807f-a5f86dcc9c77|
|**URI перенаправления**|Значение URI, указываемое разработчиками при регистрации приложения в Azure Active Directory и необходимое для возврата маркеров проверки подлинности именно в эту конечную точку.<br /><br />URI перенаправления является необязательным параметром для средства изоляции приложений. Если он не указан, будет использоваться URI по умолчанию.|urn:ietf:wg:oauth:2.0:oob|


### Шаги для приложений, использующих ADAL

1.  Просмотрите раздел [Обзор идентификаторов, которые необходимо получить](#overview-of-identifiers-you-need-to-get), чтобы определить значения, которые необходимо получить.

2.  Настройте доступ для управления мобильными приложениями в Azure Active Directory, выполнив следующие действия:

    1. Войти в существующую учетную запись Azure Active Directory на портале управления Azure.

    2.  В Azure Active Directory щелкнуть **Регистрация существующего бизнес-приложения** .

    3.  В разделе настройки выберите **Настройка доступа к веб-API в других приложениях**.

    4.  В первом раскрывающемся списке в разделе **Разрешение для других приложений** выберите **Управление мобильными приложениями Intune**.

        Теперь вы можете использовать идентификатор клиента приложения в средства упаковки приложений. Идентификатор клиента приложения можно найти на портале управления Azure Active Directory, как описано в разделе [Обзор идентификаторов, которые необходимо получить](#overview-of-identifiers-you-need-to-get).

3.  Используйте значения **идентификатора клиента** (со свойством **–a**) и **Redirect-URI** в виде свойств командной строки в инструменте упаковки приложений. Если эти значения отсутствуют, применяются значения по умолчанию. Необходимо указать оба значения, иначе конечному пользователю не удастся удостоверить подлинность обработанного приложения.

### Сертификат, подготовительный профиль и требования проверки подлинности

|Требование|Подробные сведения|
|---------------|-----------|
|Подготовительный профиль|**Перед включением подготовительного профиля убедитесь, что он является допустимым**. При обработке приложения iOS инструмент упаковки приложений не проверяет срок действия профиля. Если указан подготовительный профиль с истекшим сроком действия, средство изоляции приложений включит этот профиль, и о проблеме станет известно только после того, как установка приложения на устройстве iOS завершится неудачей.|
|Сертификат|**Прежде чем указывать сертификат, убедитесь, что он является допустимым**. При обработке приложения iOS инструмент не проверяет срок действия сертификата. Если указан хэш для сертификата с истекшим сроком действия, средство обработает и подпишет приложение, но его не удастся установить на устройства.<br /><br />**Убедитесь, что сертификат, предоставленный для подписи упакованного приложения, имеет соответствие в подготовительном профиле**. Инструмент не проверяет наличие соответствия для сертификата, предоставленного для подписи упакованного приложения.|
|Проверка подлинности|Для поддержки шифрования на устройстве должен быть задан ПИН-код. При касании строки состояния на устройствах, где развернуто изолированное приложение, пользователю будет необходимо повторить проверку подлинности в [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)]. Политика по умолчанию в упакованном приложении — *проверка подлинности при повторном запуске*. В iOS все внешние уведомления (например, телефонный звонок) обрабатываются как выход из приложения и его повторный запуск.<br /><br />Первый пользователь, который входит в изолированное приложение того же издателя, кэшируется. С этого момента получать доступ к приложению может только этот пользователь. Чтобы сбросить пользователя, необходимо отменить регистрацию устройства, а затем зарегистрировать устройство повторно.|

### Устранение неполадок и технические замечания для ADAL

-   Если не найдено ни одного ресурса ADAL, в средство будет включена динамическая библиотека ADAL. Средство выполнит поиск библиотеки ADAL с именем **ADALiOS.bundle** в корневой папке.

-   Средство не будет искать двоичные файлы ADAL (если таковые имеются) в приложении. Если приложение ссылается на устаревшую версию, во время входа могут возникать ошибки выполнения, если включены политики проверки подлинности.

-   [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] извлекает маркер AAD в MAM resource-id [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] для проверки подлинности. Однако он не используется в каком-либо вызове, который в свою очередь проверял бы допустимость маркера. [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] только читает имя субъекта-пользователя (UPN), выполнившего вход, для определения доступа к приложению. Маркер AAD не используется для дальнейших вызовов службы.

-   Маркеры проверки подлинности являются общими для приложений одного издателя, поскольку они хранятся в общей цепочке ключей. Если необходимо изолировать определенное приложение, для него необходимо использовать другой сертификат для подписи и подготовительный профиль.

-   Указание идентификатора клиента приложения и URI перенаправления позволяет избежать дублирования запросов на ввод учетных данных для входа. Идентификатор клиента должен быть зарегистрирован для доступа к опубликованному ресурсу MAM [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] на панели мониторинга AAD. Невыполнение этого требования приведет к ошибке входа при запуске приложения.

## Установка прав приложения
Перед упаковкой приложения можно назначить **права** для предоставления приложению дополнительных разрешений и возможностей, которые отсутствуют в приложении по умолчанию.  **Файл прав** используется во время подписи кода для задания специальных разрешений в приложении (например, доступа к общей цепочке ключей). Определенные службы приложения, которые называют **возможностями**, включаются в Xcode во время разработки приложения. После включения возможности отражаются в файле прав. Дополнительные сведения о правах и возможностях см. в статье [Добавление возможностей](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html) в библиотеке разработчика iOS. Полный список поддерживаемых возможностей см. в статье [Поддерживаемые возможности](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/SupportedCapabilities/SupportedCapabilities.html).

### Поддерживаемые возможности для средства упаковки приложений для iOS

|Функция|Описание|Рекомендации по использованию|
|--------------|---------------|------------------------|
|Группы приложений|Используйте группы приложений, чтобы позволить нескольким приложениям осуществлять доступ к общим контейнерам и разрешить дополнительное межпроцессное взаимодействие между приложениями.<br /><br />Чтобы включить группы приложений, откройте панель **Возможности** и щелкните параметр **Включить** в разделе **Группы приложений**. Вы можете добавить группы приложений или выбрать уже существующие.|При использовании групп приложений применяйте обратную нотацию DNS:<br /><br />*группа.com.название_компании.группа_приложений*|
|Фоновые режимы|Включение фоновых режимов позволяет вашему приложению iOS продолжать выполнение в фоновом режиме.||
|Защита данных|Функция защиты данных добавляет уровень защиты для файлов, сохраняемых приложением iOS на диск. Функция защиты данных использует встроенные аппаратные средства шифрования, присутствующие на определенном устройстве, для хранения файлов в зашифрованном виде на диске. Приложение должно быть подготовлено для использования защиты данных.||
|Покупка из приложения|Покупка из приложения внедряет магазин непосредственно в код приложения, давая вам возможность подключаться к магазину и безопасно обрабатывать платежи от пользователя. Покупку из приложения можно использовать для сбора оплаты за расширенную функциональность или дополнительное содержимое, которое может использоваться приложением.||
|Общий доступ к цепочке ключей|Включение общего доступа к цепочке ключей позволяет приложениям использовать пароли в цепочке ключей совместно с другими приложениями, разработанными вашей группой.|При использовании общего доступа к цепочке ключей применяйте обратную нотацию DNS:<br /><br />*com.название_компании.группа_цепочки_ключей*|
|Личный VPN|Включите личный VPN, чтобы разрешить приложению создать настраиваемую конфигурацию VPN системы и управлять ей, используя платформу сетевого расширения.||
|Push-уведомления|Служба push-уведомлений Apple (APN) позволяет приложению, которое не выполняется на переднем плане, уведомлять пользователя о наличии информации для него.|Для работы push-уведомлений необходимо использовать подготовительный профиль для конкретного приложения.<br /><br />Следуйте указаниям в [документации для разработчика Apple](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html).|
|Конфигурация беспроводных периферийных устройств|Включение конфигурации беспроводных периферийных устройств добавляет в проект платформу внешних периферийных устройств и позволяет приложению настраивать периферийные устройства Wi-Fi MFi.||

### Шаги для включения прав

1.  Включите возможности в приложении:

    1.  В Xcode перейдите к целевой платформе приложения и щелкните область **Возможности**.

    2.  Включите соответствующие возможности. Подробные сведения о каждой возможности и том, как определить правильные значения, см. в статье [Добавление возможностей](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html) в библиотеке разработчика iOS.

    3.  Запишите все идентификаторы, созданные во время данного процесса.

    4.  Выполните сборку и подпись приложения, которое планируется упаковать.

2.  Включите права в подготовительном профиле:

    1.  Войдите в центр разработчиков Apple.

    2.  Создайте подготовительный профиль для приложения. Инструкции см. в статье [Получение необходимых компонентов для инструмента упаковки приложений Intune для iOS](http://blogs.technet.com/b/microsoftintune/archive/2015/02/25/how-to-obtain-the-prerequisites-for-the-intune-app-wrapping-tool-for-ios.aspx).

    3.  В подготовительном профиле включите те же права, что и в приложении. Потребуется указать те же идентификаторы, которые вы задали во время разработки приложения.

    4.  Завершите работу мастера подготовительного профиля и скачайте файл.

3.  Убедитесь, что выполнены все необходимые условия, а затем упакуйте приложение.

### Устранение распространенных неполадок с правами
Если средство упаковки приложений для iOS отображает ошибку права, попробуйте выполнить следующие действия.

|Проблема|Причина|Разрешение|
|---------|---------|--------------|
|Не удалось проанализировать права, созданные из входного приложения.|Средству упаковки приложений не удается прочитать файл прав, который был извлечен из приложения. Возможно, файл прав имеет неправильный формат.|Проверьте файл прав для своего приложения. Для этого следуйте приведенным ниже инструкциям. При проверке файла прав убедитесь в отсутствии любого неправильного синтаксиса. Файл должен иметь формат XML.|
|Права отсутствуют в подготовительном профиле (с перечислением отсутствующих прав). Переупакуйте приложение с использованием подготовительного профиля, имеющего данные права.|Существует несоответствие между правами, которые включены в подготовительном профиле, и возможностями, включенными в приложении. Это несоответствие также касается и идентификаторов, связанных с отдельными возможностями (например групп приложений, доступа к цепочкам ключей и т. д.).|Как правило, можно создать новый подготовительный профиль, который включает в себя те же возможности, что и приложение. Если идентификаторы профиля и приложения не совпадают, средство упаковки приложений по возможности заменяет эти идентификаторы. Если эта ошибка сохраняется после создания профиля подготовки, можно попробовать удалить права из приложения с помощью параметра **– e** параметр (см. раздел "Использование параметра –e для удаления прав из приложения" ниже).|

### Поиск существующих прав подписанного приложения
Чтобы просмотреть существующие права подписанного приложения и подготовительного профиля, выполните следующие действия:

1.  Найдите IPA-файл и измените его расширение на ZIP.

2.  Разверните этот ZIP-файл. В результате создается папка Payload, содержащая ваш пакет APP.

3.  Используйте средство разработки для проверки прав в пакете APP, как указано ниже:

    ```
    $ codesign -d --entitlements :- "Payload/YourApp.app"
    ```
    где `YourApp.app` — это реальное имя вашего пакета APP.

4.  Используйте средство обеспечения безопасности для проверки прав внедренного подготовительного профиля приложения:

    ```
    $ security -D -i "Payload/YourApp.app/embedded.mobileprovision"
    ```
    где `YourApp.app` — это реальное имя вашего пакета APP.

### Использование параметра —e для удаления прав из приложения
Эта команда удаляет все возможности, включенные в приложении, которые не находятся в файле прав. Удаление возможностей, которые используются приложением, может нарушить работу приложения. Примером ситуации, в которой можно удалить отсутствующие возможности, является наличие приобретенного у поставщика приложения, содержащего все возможности по умолчанию.

```
./IntuneMAMPackager.app/Contents/MacOS/IntuneMAMPackager –i /<path of input app>/<app filename> -o /<path to output folder>/<app filename> –p /<path to provisioning profile> –c <SHA1 hash of the certificate> -e
```

## Обеспечение безопасности и конфиденциальности средства изоляции приложений
При использовании средства изоляции приложений придерживайтесь следующих рекомендаций по обеспечению безопасности и конфиденциальности.

-   Указываемые вами сертификат для подписи, подготовительный профиль и бизнес-приложение должны находиться на том же компьютере Mac, который используется для запуска средства изоляции приложений. Если файлы находятся по пути UNC, убедитесь, что они доступны с компьютера Mac. Путь должен быть защищен с помощью подписи IPsec или SMB.

    Изолированное приложение, импортированное в консоль [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)], должно быть на том же компьютере, на котором запускается средство. Если файл находится по пути UNC, убедитесь, что он доступен на компьютере с консолью [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)]. Путь должен быть защищен с помощью подписи IPsec или SMB.

-   Среда, в которую загружается средство с сайта центра загрузки Майкрософт, должна быть защищена с помощью подписи IPsec или SMB.

-   В целях обеспечения защиты от атак обрабатываемое приложение должно загружаться из надежного источника.

-   Убедитесь, что целевая папка, указанная в средстве изоляции приложений, защищена. Особенно это касается удаленных папок.

-   Приложения iOS, имеющие диалоговое окно отправки файла, позволяют обходить примененные ограничения на вырезание, копирование и вставку. Например, диалоговое окно отправки файла можно использовать для отправки снимка экрана с данными приложения.

-   Когда пользователи отслеживают папку документов на своих устройствах из изолированного приложения, они могут увидеть папку с именем **.msftintuneapplauncher**. Изменение или удаление этой папки может повлиять на правильность функционирования ограниченных приложений.

### См. также
- [Выбор подготовки приложений для управления мобильными приложениями с помощью Microsoft Intune](decide-how-to-prepare-apps-for-mobile-application-management-with-microsoft-intune.md)</br>
- [Управление параметрами и компонентами на устройствах с помощью политик Microsoft Intune](manage-settings-and-features-on-your-devices-with-microsoft-intune-policies.md)</br>
- [Подготовка приложений для управления мобильными приложениями с помощью пакета SDK](use-the-sdk-to-enable-apps-for-mobile-application-management.md)


<!--HONumber=May16_HO2-->


